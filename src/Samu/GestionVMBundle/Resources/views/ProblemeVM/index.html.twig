{# @Variables : 
array : listPbVehicules
array : listPbMateriel
array : listVehicules
int   : nbVehicules
bool  : validation
#}

{% extends "SamuGestionVMBundle::gvmlayout.html.twig" %}

{% block title %}
	Tableau de bord - {{ parent() }}
{% endblock %}
{% block gvm_actionbody %}
	{% for flashMessage in app.session.get('notice') %}
		{{ flashMessage }}
	{% endfor %}
	<h1>Tableau de bord</h1>

	<div>
		<h2>Problèmes véhicules</h2>
		Nombre de problèmes : {{ listPbVehicules|length }}
		{% for i in 1..listPbVehicules[listPbVehicules|length - 1].vehicule.id %}
			<div class="probleme_view">
				<div class="vehicule_name">
					<p>{{ listVehicules[i-1].name }}</p>
				</div>

				{% for probleme in listPbVehicules if probleme.vehicule.id == i %}
					{% include 'SamuGestionVMBundle:ProblemeVM:problemeView.html.twig' %}
				{% endfor %}
			</div>
		{% endfor %}	
	</div>

	<div>
		<h2>Problèmes Matériels</h2>
		Nombre de problèmes : {{ listPbMateriel|length }}
			{% for probleme in listPbMateriel %}
				{% include 'SamuGestionVMBundle:ProblemeVM:problemeView.html.twig' %}
			{% endfor %}
	</div>	
{% endblock %}

